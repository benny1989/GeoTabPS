<!doctype html>
<html><head><meta charset="utf-8"></head>
<body>
<script>
/* manifest name → whoami */
geotab.addin.whoami = () => ({
  startup: async (api, _state, done) => {
    try {
      /* 1 ─ session basics */
      const s = await api.getSession();
      const base = {
        database : s.database,
        userName : s.credentials.userName,
        userId   : s.credentials.userId,
        sessionId: s.sessionId,
        server   : s.server
      };
      console.log(base);
      alert("Hi " + base.userId);
      alert("Hi " + (base.userName);

    } catch (err) {
      console.error('[whoami] error', err);
    } finally {
      done();                          // always let Drive continue loading
    }
  }
});
</script>
</body></html>
